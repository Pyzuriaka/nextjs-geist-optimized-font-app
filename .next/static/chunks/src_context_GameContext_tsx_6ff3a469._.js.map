{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/context/GameContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useReducer, ReactNode } from 'react';\nimport { GameSession, GameChoice, GameError } from '@/types/game';\n\ninterface GameState {\n  currentGame: GameSession | null;\n  gameHistory: GameSession[];\n  error: GameError | null;\n  isLoading: boolean;\n}\n\ntype GameAction =\n  | { type: 'CREATE_GAME'; payload: GameSession }\n  | { type: 'JOIN_GAME'; payload: { gameId: string; player2: string } }\n  | { type: 'SUBMIT_CHOICE'; payload: { playerId: string; choice: GameChoice } }\n  | { type: 'END_GAME'; payload: { winner: string } }\n  | { type: 'SET_ERROR'; payload: GameError }\n  | { type: 'CLEAR_ERROR' }\n  | { type: 'SET_LOADING'; payload: boolean };\n\nconst initialState: GameState = {\n  currentGame: null,\n  gameHistory: [],\n  error: null,\n  isLoading: false,\n};\n\nconst gameReducer = (state: GameState, action: GameAction): GameState => {\n  switch (action.type) {\n    case 'CREATE_GAME':\n      return {\n        ...state,\n        currentGame: action.payload,\n        error: null,\n      };\n\n    case 'JOIN_GAME':\n      if (!state.currentGame) return state;\n      return {\n        ...state,\n        currentGame: {\n          ...state.currentGame,\n          player2: action.payload.player2,\n          status: 'joined',\n        },\n        error: null,\n      };\n\n    case 'SUBMIT_CHOICE':\n      if (!state.currentGame) return state;\n      return {\n        ...state,\n        currentGame: {\n          ...state.currentGame,\n          ...(action.payload.playerId === state.currentGame.player1\n            ? { player1Choice: action.payload.choice }\n            : { player2Choice: action.payload.choice }),\n        },\n      };\n\n    case 'END_GAME':\n      if (!state.currentGame) return state;\n      const endedGame = {\n        ...state.currentGame,\n        status: 'revealed' as const,\n        winner: action.payload.winner,\n      };\n      return {\n        ...state,\n        currentGame: null,\n        gameHistory: [...state.gameHistory, endedGame],\n      };\n\n    case 'SET_ERROR':\n      return {\n        ...state,\n        error: action.payload,\n      };\n\n    case 'CLEAR_ERROR':\n      return {\n        ...state,\n        error: null,\n      };\n\n    case 'SET_LOADING':\n      return {\n        ...state,\n        isLoading: action.payload,\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst GameContext = createContext<{\n  state: GameState;\n  dispatch: React.Dispatch<GameAction>;\n} | null>(null);\n\nexport function GameProvider({ children }: { children: ReactNode }) {\n  const [state, dispatch] = useReducer(gameReducer, initialState);\n\n  return (\n    <GameContext.Provider value={{ state, dispatch }}>\n      {children}\n    </GameContext.Provider>\n  );\n}\n\nexport function useGame() {\n  const context = useContext(GameContext);\n  if (!context) {\n    throw new Error('useGame must be used within a GameProvider');\n  }\n  return context;\n}\n\n// Helper functions for common game actions\nexport function useGameActions() {\n  const { dispatch } = useGame();\n\n  const createGame = (stake: number, player1: string) => {\n    dispatch({\n      type: 'CREATE_GAME',\n      payload: {\n        id: `game_${Date.now()}`,\n        stake,\n        player1,\n        status: 'created',\n      },\n    });\n  };\n\n  const joinGame = (gameId: string, player2: string) => {\n    dispatch({\n      type: 'JOIN_GAME',\n      payload: { gameId, player2 },\n    });\n  };\n\n  const submitChoice = (playerId: string, choice: GameChoice) => {\n    dispatch({\n      type: 'SUBMIT_CHOICE',\n      payload: { playerId, choice },\n    });\n  };\n\n  const endGame = (winner: string) => {\n    dispatch({\n      type: 'END_GAME',\n      payload: { winner },\n    });\n  };\n\n  const setError = (error: GameError) => {\n    dispatch({\n      type: 'SET_ERROR',\n      payload: error,\n    });\n  };\n\n  const clearError = () => {\n    dispatch({ type: 'CLEAR_ERROR' });\n  };\n\n  const setLoading = (isLoading: boolean) => {\n    dispatch({\n      type: 'SET_LOADING',\n      payload: isLoading,\n    });\n  };\n\n  return {\n    createGame,\n    joinGame,\n    submitChoice,\n    endGame,\n    setError,\n    clearError,\n    setLoading,\n  };\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}